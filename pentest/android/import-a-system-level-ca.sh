# convert the format to PEM
openssl x509 -inform DER -in cacert.der -out cacert.pem

# rename using the subject hash
HASH=$(openssl x509 -inform PEM -subject_hash_old -in cacert.pem |head -1)
mv cacert.pem ${HASH}.0

# restart the device
adb root

# remount the system to allow modifications
# adb shell mount -o rw,remount,rw /system
adb remount

# move the file to the trusted repo
adb push ${HASH}.0 /system/etc/security/cacerts/
adb shell "chmod 644 /system/etc/security/cacerts/${HASH}.0"

# remount the system in read-only
# adb shell mount -o ro,remount,ro /system

# restart again
adb reboot
