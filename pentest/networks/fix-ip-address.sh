#!/bin/bash

if (( $# > 3 )); then
  echo "$0 [ip [interface [netmask]]]"
  exit 0
else
  ADDRESS=${1:-"192.168.0.1"}
  INTERFACE=${2:-"wlan0"}
  NETMASK=${3:-"255.255.255.0"}
fi

# using ifconfig
ifconfig "$INTERFACE" "$ADDRESS" netmask "$NETMASK"

# fix permanently, in etc
echo "auto $INTERFACE
iface $INTERFACE inet static
  address $ADDRESS
  netmask $NETMASK" |
  sudo tee -a /etc/network/interfaces

# using iwd
echo "[IPv4]
Address=192.168.1.10
Netmask=255.255.255.0
Gateway=192.168.1.1
Broadcast=192.168.1.255
DNS=192.168.1.1" |
  sudo tee -a /var/lib/iwd/network.psk
